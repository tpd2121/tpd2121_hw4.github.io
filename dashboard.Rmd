---
title: "Dashboard"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(plotly)
library(p8105.datasets)
```


```{r data}
data(rest_inspec)

attr(rest_inspec, 'spec') <- NULL

rest_inspec = 
  rest_inspec %>% 
  select(-building, -camis, -dba, -phone, -inspection_date, -record_date, -street, -grade_date, -violation_code) %>% 
  drop_na()
```
 
Column {data-width=650}
-----------------------------------------------------------------------

### Asian Food Inspection Grade in Manhattan

```{r chart 1}
rest_inspec %>% 
  filter (boro == "MANHATTAN", cuisine_description %in% c("Afghan", "Asian", "Bangladeshi", "Chinese/Japanese", "Chinese", "Japanese", "Indonesian", "Pakistani", "Filipino", "Indian", "Korean", "Pakistani", "Thai", "Vietnamese/Cambodian/Malaysia")) %>% 
  count(grade) %>% 
  mutate(grade = forcats::fct_relevel(grade, c("A", "B", "C", "Z", "P", "Not Yet Graded"))) %>% 
  plot_ly(x = ~grade, y = ~n, color = ~grade, type = "bar", colors = "viridis") %>% 
  layout(showlegend = FALSE)
```


Column {data-width=350}
-----------------------------------------------------------------------

### Score of Asian Food in Manhattan

```{r chart 2}
rest_inspec %>% 
  filter (boro == "MANHATTAN", cuisine_description %in% c("Afghan", "Asian", "Bangladeshi", "Chinese/Japanese", "Chinese", "Japanese", "Indonesian", "Pakistani", "Filipino", "Indian", "Korean", "Pakistani", "Thai", "Vietnamese/Cambodian/Malaysia")) %>% 
  plot_ly(y = ~score, color = ~cuisine_description, type = "box", colors = "viridis") %>% 
  layout(showlegend = FALSE)
```

### Chart C

```{r chart 3}
rest_inspec %>% 
  filter (boro == "MANHATTAN", cuisine_description %in% c("Afghan", "Asian", "Bangladeshi", "Chinese/Japanese", "Chinese", "Japanese", "Indonesian", "Pakistani", "Filipino", "Indian", "Korean", "Pakistani", "Thai", "Vietnamese/Cambodian/Malaysia"))
```

